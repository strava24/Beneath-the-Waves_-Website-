<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css">
    <!--Adding bootstrap icons to the page-->

    <style>

        a {
            text-decoration: none;
            color: white;
        }

        body {
            background-image: url(images/gradient_BG.jpg);
        }

        /*Shop item styles*/
        .shop {
            display: grid;
            grid-template-columns: repeat(4, 220px); /*Defining 4 rows with each having 220px width on it*/
            gap: 30px;
            justify-content: center;
            margin-bottom: 50px;
        }

        @media (max-width: 1000px) {
            .shop { /*Defining the shop to contain 2 columns on a row when the browser width gets to 1000px*/
                grid-template-columns: repeat(2, 220px);
            }
        }
        @media (max-width: 500px) {
            .shop { /*Defining the shop to contain 1 columns on a row when the browser width gets to 500px*/
                grid-template-columns: repeat(1, 220px);
            }
        }

        .item {
            border: 1px solid #012A4A;
            border-radius: 5px;
            padding: 2px;
            border-radius: 5px;
        }

        .item img {
            width: 100%;
            border-radius: 10px;
            transition: 1s;
        }

        .item img:hover { /*Adding a simple hover effect to the items on the shop*/
            opacity: 0.8; 
        }

        .details {
            display: flex;
            flex-direction: column; /*Changing the flex direction to column*/
            padding: 10px;
            gap: 10px;
            background-color: #A9D6E5;
            border-radius: 10px;
        }

        .details h4 {
            text-align: center;
        }

        .details p {
            font-size: small;
        }

        .details #name {
            color: #012A4A;
        }

        .price-quantity {
            display: flex; /*default flex direction is row*/
            justify-content: space-between; /*This property works on the x axis*/
            align-items: center; /*This property works on the y axix*/
        }

        .buttons {
            display: flex;
            gap: 8px;
            font-size: 20px;
        }

        i { /*Changing the cursor for bootstap elements*/
            cursor: pointer;
        }

        .bi-dash {
            color: red;
            font-weight: bold;
        }

        .bi-plus {
            color: green;
        }

        .bi-dash:hover, .bi-plus:hover {
            transform: scale(1.2);
        }

        #top-button {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
    </style>

</head>
<body>
    <script>
    
        document.addEventListener('scroll',()=>{
            const header = document.querySelector("header");

            if(window.scrollY >0){
                header.classList.add("scrolled");

            }else {
                header.classList.remove("scrolled")
            }
        })
    </script>
    <header>
        <div class="company-logo">
            <img class="logo" src="images/logo.jpg" alt="logo">
            <img src="images/titleFinal.png" alt="title" class="company-title">
        </div>
        
        <nav>
            <ul class="nav_links">
                <li><a href="../Student_2/home.html">Home</a></li>
                <li><a href="../Student_3/team.html">About Us</a></li>
                <li><a href="#shop">Shop</a></li>
                <li><a href="../Student_4/sitemap.html">Sitemap</a></li>
                <li><a href="../Student_4/gallery.html">Gallery</a></li>
                <li><a href="../Student_2/feedback.html">Feedback</a></li>
            </ul>

        </nav>

        <a href="cart.html">
            <div class="cart">
                <i class="bi bi-cart"></i> <!--Shopping cart logo from bootsrtap-logos-->
                <div id="cartAmount" class="cartAmount">0</div> <!--Initially the item count on the cart will be 0-->
            </div>
        </a>

        <div class="buttons">
            <a  href="../Student_3/profile.html" class="button">Signup</a>
        </div>

    </header>
    <div class="shop" id="shop"></div>

    <div class="buttons" id="top-button">
        <a href="#shop" class="button"><i class="bi bi-arrow-up-circle"></i></a>
    </div>

    <section class="section_footer">
        <div class="footer_pageEditor">

            <p>Done by <a href="pageEditor_S1.html" target="_blank">Robosriyas Fernando</a></p>
            
        </div>

        <div class="footer">

            <div class="footer_content">
                
                <div class="footer_logo">
                    <img class="footer_img" src="images/logo.jpg" alt="company logo">
                    <img class="footer_title" src="images/titleFinal.png" alt="website title">
                </div>
                <div class="footer_icons">
                    <h4>Social media</h4>
                    <a href="https://www.instagram.com/unitednations/" target="_blank"><i class='bx bxl-instagram-alt'></i></a>
                    <a href="https://web.facebook.com/groups/greenrangersearth.org/?_rdc=1&_rdr" target="_blank"><i class='bx bxl-facebook' ></i></a>
                    <a href="https://x.com/UN" target="b"><i class='bx bxl-twitter' ></i></a>
                    <a href="https://www.linkedin.com/company/united-nations/" target="_blank"><i class='bx bxl-linkedin'></i></a>
                </div>
                

            </div>
            <div class="footer_content">
                <h4>Explore</h4>
                <ul>
                    <li><a href="../Student_2/home.html">Home</a></li>
                    <li><a href="../Student_3/team.html">About US</a></li>
                    <li><a href="../Student_2/feedback.html">Feedback</a></li>
                    <li><a href="#shop">Shop</a></li>
                    <li><a href="cart.html">Cart</a></li>
                    <li><a href="../Student_4/sitemap.html">Sitemap</a></li>
                    <li><a href="../Student_4/gallery.html">Gallery</a></li>
                    <li><a href="../Student_2/lifediversity.html">Life Diversity</a></li>
                    <li><a href="content_S1.html">Tourism</a></li>
                    <li><a href="../Student_3/content_S3.html">Coral Reefs</a></li>
                    <li><a href="../Student_4/content_page04.html">Sustainable Practices</a></li>

                </ul>              

            </div>

            <div class="footer_content">
                <h4>Contact Us</h4>
                <ul>
                    <li>Tele  : +1-212-963-3209</li>
                    <li>Email :  population@un.org</li>
                    <li class="extra_space">director.oisc@un.org</li>
                </ul>

            </div>

            <div class="footer_content">

                <h4>Legal</h4>
                <ul>
                    <li><a href="https://www.un.org/en/about-us/terms-of-use" target="_blank">Terms and conditions</a></li>
                    <li><a href="https://www.un.org/en/about-us/privacy-notice" target="_blank">Privacy policy</a></li>
                </ul>

            </div>
    </div>
    
    <div class="rights">
        &copy; 2024 Beneath the waves. All rights reserved.
    </div>

    </section>

    <script>
        let shop = document.getElementById("shop"); // Targetting the shop

        let shopItemsData = [ // Defining items as objects 
            {
                id: "hoodie",
                name: "'Turtle Haven Hoodie'",
                price: 30,
                desc: "Exclusive Merch Hoodie Featuring Our Iconic Logo",
                img: "images/merch_hoodie.png"
            },
            {
                id: "tshirt",
                name: "'Turtle Haven Tee'",
                price: 5,
                desc: "Exclusive Merch Tee Featuring Our Iconic Logo",
                img: "images/merch_finalT.png"
            },
            {
                id: "cap",
                name: "'Turtle Haven Cap'",
                price: 3,
                desc: "Exclusive Merch Cap Featuring Our Iconic Logo",
                img: "images/merch_cap.png"
            },
            {
                id: "notebook",
                name: "'Turtle Haven Book'",
                price: 2,
                desc: "Exclusive Merch NoteBook Featuring Our Iconic Logo",
                img: "images/merch_notebookFinal.jpg"
            },
            {
                id: "mug",
                name: "'Turtle Haven Mug'",
                price: 6,
                desc: "Exclusive Merch Mug Featuring Our Iconic Logo",
                img: "images/merch_mug_final.png"
            },
            {
                id: "bag",
                name: "'Whale Song Tote'",
                price: 8,
                desc: "Exclusive Whale-themed Tote Bag in Oceanic Hues",
                img: "images/merc-finalbag.jpeg"
            },
            {
                id: "wallStickers",
                name: "'Oceanic Life Decals'",
                price: 10,
                desc: "Exclusively Elegant Sea Creatures Wall Stickers",
                img: "images/merch_stickers.avif"
            },
            {
                id: "sculpture",
                name: "'Dolphin Sculpture'",
                price: 20,
                desc: "Handcrafted Dolphin Sculpture",
                img: "images/merch_sculpture.jpg"
            },
            {
                id: "beachKit",
                name: "'Coastal Escape Kit'",
                price: 30,
                desc: "Beach Essentials Kit: Flip Flops, Towel, Sunglasses",
                img: "images/merch_beachkit.png"
            },
            {
                id: "painting1", // id should be unique for each item on the cart so that JS will be able to recognize the product to do the calculations
                name: "'Ocean Symphony'",
                price: 100,
                desc: "Exclusive Painting of Ocean Waves in Vibrant Blues",
                img: "images/Ocean-Symphony_final.png"
            },
            {
                id: "paiting2",
                name: "'Seahorse Serenade'",
                price: 80,
                desc: "Exclusive Painting of Seahorse Dreams",
                img: "images/final_painting.jpg"
            },
            {
                id: "carePack",
                name: "'Oceanic Men's Care'",
                price: 40,
                desc: "Men's Essentials Kit: Watch, Bottle, Perfume",
                img: "images/merch_finalPackage.png"
            }
        ];
        let basket = JSON.parse(localStorage.getItem("data")) || []; // This basket is to keep track of all the products on the cart
        // If there is data on the local storage then the data will be stored on the basket array
        // If there is no data on the array then an empty array will be initialized as baket

        let generateShop = () => { // Definiing an ES6 function to generate the cards on the shop
            return (shop.innerHTML= shopItemsData.map((x)=>{ // map function to iterate over each element on the shopItemsData, innerHTML to set the HTML content with the id shop
                let search = basket.find((y) => y.id === x.id) || []; // Search function to check if there is data on the local storage, if so updating that number as the quantity
                return ` <!--Making template literals, We have defined the card to get printed within the shop -->
                <div class="item" id=product-id-${x.id}>
                    <img width="100%" src=${x.img} alt="Just a baddie!" height="300px">
                    <div class="details">
                        <h4 id="name">${x.name}</h4>
                        <p>${x.desc}</p>
                        <div class="price-quantity">
                            <h2>$ ${x.price}</h2>
                            <div class="buttons">
                                <i onclick="decrement(${x.id})" class="bi bi-dash"></i> <!--Triggering decrement function on click, Passing id as a parameter so that JS will be able to identify the current item-->
                                <div class="quantity" id=${x.id}>
                                    ${search.item === undefined ? 0: search.item}
                                    <!--If the current id is not found then we're (undefined) we're setting 0 at the start.-->
                                    <!--If the current is found then we're adding that item count value-->
                                </div> <!--Everytime we increment / decrement by clicking on the + / - we will be targeting the product throught the id, so we have given id to quantity as well-->
                                <i onclick="increment(${x.id})" class="bi bi-plus"></i> <!--Triggering increment function on click-->
                            </div>
                        </div>
                    </div>
                </div>`
            }).join("")); // Joining using an empty string to remove the commas on the array after each objects
        };

        generateShop(); // Invoking the function to genrate card

        let increment = (id)=> { // ES6 function to increment the product count when the user clicks on the +
            let selectedItem = id;
            
            // selectedItem.id will give the id of the selectedItem
            let search = basket.find((x)=> x.id === selectedItem.id); // This variable is to check if the currently incremented item is already on the basket by comparing the object's id which is unique
            // Es6 function to search the basket for the cuurent item

            if(search === undefined) { // Creating a new object on the basket if the currently selected item is not on the basket already
                basket.push({
                    id: selectedItem.id,
                    item: 1
                });
            }
            else {
                search.item += 1; // incrementing the item count by 1 if the item already exists, search will hold the referance for the current item
            }

            update(selectedItem.id);

            localStorage.setItem("data", JSON.stringify(basket)); // This step is to locally save the basket, so that the data wont be lost when we refresh the page
            // data will be the key

        }

        let decrement = (id)=> { // ES6 function to decrement the product count when the user clicks on the -
            let selectedItem = id;

            // selectedItem.id will give the id of the selectedItem
            let search = basket.find((x)=> x.id === selectedItem.id); // This variable is to check if the currently incremented item is already on the basket by comparing the objec's id which is unique
            // ES6 function to search the basket for the current item
            
            if (search === undefined || search.item === 0) {
                /**
                 * Search is undefined if the current item is not on the basket
                 * Search is 0 if the current object was on the basket and then made to 0
                 */

                alert("This item is not on the cart!"); // Giving an alert that this item is not on the cart
                return; // returning to prevent the program from crashing
            }
            else {
                search.item -= 1; // incrementing the item count by 1 if the item already exists, search will hold the referance for the current item
            }
            
            update(selectedItem.id); // Updaing the basket and then filtering it
            basket = basket.filter((x) => x.item !== 0); // removing the products with item count 0 from the cart

            localStorage.setItem("data", JSON.stringify(basket)); // This step is to locally save the number of items we have selected, so thst the data wont be lost when we refresh the page
        }

        /**
         * This funnction is to calculate the number the user has choosen an item.
         * This function will be triggered whenever the user clicks on + / -
         */
        let update = (id)=> { 
            let search = basket.find((x) => x.id === id);
            document.getElementById(id).innerHTML = search.item; // Getting the object by id and then updating the number using innerHTML
            calculation(search.item); // Everytime the update function is triggered the calculation function will also get triggered
        }

        /**
         * This function is to update the basket
         * The function will get triggered whenever the number on the card is getting updated
         */
        let calculation = () => {
            let cartIcon = document.getElementById("cartAmount");
            cartIcon.innerHTML = basket.map((x) => x.item).reduce((x, y) => x+y, 0);
            // mapping all the elements to get the number of times an element gets added to the cart
            /**
             * mapping will hold a new array with the item count values, so we're using reduce to add them
             * x in reduce is the first number
             * y in reduce will be the second number
             * if map returns [1, 2, 3, 4]
             * on the start x is 1, y is 2
             * and then x is 3(1+3) and y is 3. goes till everything gets added
             */
        }

        calculation(); // Invoking the function outside so that the cart will be updated at the beginning of the program
    </script>
</body>
</html>